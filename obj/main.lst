                              1 ;--------------------------------------------------------
                              2 ; File Created by SDCC : free open source ANSI-C Compiler
                              3 ; Version 3.6.8 #9946 (CYGWIN)
                              4 ;--------------------------------------------------------
                              5 	.module main
                              6 	.optsdcc -mz80
                              7 	
                              8 ;--------------------------------------------------------
                              9 ; Public variables in this module
                             10 ;--------------------------------------------------------
                             11 	.globl _main
                             12 	.globl _juego
                             13 	.globl _pausaTecladoLibre
                             14 	.globl _cpct_restoreState_mxor_u8
                             15 	.globl _cpct_setSeed_mxor
                             16 	.globl _cpct_getScreenPtr
                             17 	.globl _cpct_setPALColour
                             18 	.globl _cpct_setPalette
                             19 	.globl _cpct_setVideoMode
                             20 	.globl _cpct_drawStringM1
                             21 	.globl _cpct_setDrawCharM1
                             22 	.globl _cpct_isAnyKeyPressed_f
                             23 	.globl _cpct_scanKeyboard_f
                             24 	.globl _cpct_memset
                             25 	.globl _cpct_disableFirmware
                             26 	.globl _cursorPrint
                             27 	.globl _goblin
                             28 	.globl _player
                             29 	.globl _nivel
                             30 	.globl _entidad
                             31 	.globl _SoldadoArabe
                             32 	.globl _paletaM1
                             33 ;--------------------------------------------------------
                             34 ; special function registers
                             35 ;--------------------------------------------------------
                             36 ;--------------------------------------------------------
                             37 ; ram data
                             38 ;--------------------------------------------------------
                             39 	.area _DATA
   0000                      40 _entidad::
   0000                      41 	.ds 60
   003C                      42 _nivel::
   003C                      43 	.ds 1
   003D                      44 _player::
   003D                      45 	.ds 20
   0051                      46 _goblin::
   0051                      47 	.ds 20
   0065                      48 _cursorPrint::
   0065                      49 	.ds 1
                             50 ;--------------------------------------------------------
                             51 ; ram data
                             52 ;--------------------------------------------------------
                             53 	.area _INITIALIZED
                             54 ;--------------------------------------------------------
                             55 ; absolute external ram data
                             56 ;--------------------------------------------------------
                             57 	.area _DABS (ABS)
                             58 ;--------------------------------------------------------
                             59 ; global & static initialisations
                             60 ;--------------------------------------------------------
                             61 	.area _HOME
                             62 	.area _GSINIT
                             63 	.area _GSFINAL
                             64 	.area _GSINIT
                             65 ;--------------------------------------------------------
                             66 ; Home
                             67 ;--------------------------------------------------------
                             68 	.area _HOME
                             69 	.area _HOME
                             70 ;--------------------------------------------------------
                             71 ; code
                             72 ;--------------------------------------------------------
                             73 	.area _CODE
                             74 ;src/main.c:44: void main(void) {
                             75 ;	---------------------------------
                             76 ; Function main
                             77 ; ---------------------------------
   0000                      78 _main::
                             79 ;src/main.c:48: cpct_disableFirmware();
   0000 CDr00r00      [17]   80 	call	_cpct_disableFirmware
                             81 ;src/main.c:51: while (1) {
   0003                      82 00107$:
                             83 ;src/main.c:52: cpct_setVideoMode(1);
   0003 2E 01         [ 7]   84 	ld	l, #0x01
   0005 CDr00r00      [17]   85 	call	_cpct_setVideoMode
                             86 ;src/main.c:53: cpct_clearScreen(0x00);
   0008 21 00 40      [10]   87 	ld	hl, #0x4000
   000B E5            [11]   88 	push	hl
   000C AF            [ 4]   89 	xor	a, a
   000D F5            [11]   90 	push	af
   000E 33            [ 6]   91 	inc	sp
   000F 26 C0         [ 7]   92 	ld	h, #0xc0
   0011 E5            [11]   93 	push	hl
   0012 CDr00r00      [17]   94 	call	_cpct_memset
                             95 ;src/main.c:54: cpct_setPalette(paletaM1,4);
   0015 21 04 00      [10]   96 	ld	hl, #0x0004
   0018 E5            [11]   97 	push	hl
   0019 21r0Br01      [10]   98 	ld	hl, #_paletaM1
   001C E5            [11]   99 	push	hl
   001D CDr00r00      [17]  100 	call	_cpct_setPalette
                            101 ;src/main.c:55: cpct_setBorder(HW_BLACK);
   0020 21 10 14      [10]  102 	ld	hl, #0x1410
   0023 E5            [11]  103 	push	hl
   0024 CDr00r00      [17]  104 	call	_cpct_setPALColour
                            105 ;src/main.c:58: cpct_setDrawCharM1(2, 0);
   0027 21 02 00      [10]  106 	ld	hl, #0x0002
   002A E5            [11]  107 	push	hl
   002B CDr00r00      [17]  108 	call	_cpct_setDrawCharM1
                            109 ;src/main.c:59: cpct_drawStringM1("         Don Mendo and Lady Sol", cpctm_screenPtr(CPCT_VMEM_START, 0, 0));
   002E 21 00 C0      [10]  110 	ld	hl, #0xc000
   0031 E5            [11]  111 	push	hl
   0032 21r23r01      [10]  112 	ld	hl, #___str_0
   0035 E5            [11]  113 	push	hl
   0036 CDr00r00      [17]  114 	call	_cpct_drawStringM1
                            115 ;src/main.c:60: cpct_drawStringM1("                   in", cpctm_screenPtr(CPCT_VMEM_START, 0, 8));
   0039 21 50 C0      [10]  116 	ld	hl, #0xc050
   003C E5            [11]  117 	push	hl
   003D 21r43r01      [10]  118 	ld	hl, #___str_1
   0040 E5            [11]  119 	push	hl
   0041 CDr00r00      [17]  120 	call	_cpct_drawStringM1
                            121 ;src/main.c:61: cpct_drawStringM1("           Castle Concepcion", cpctm_screenPtr(CPCT_VMEM_START, 0, 16));
   0044 21 A0 C0      [10]  122 	ld	hl, #0xc0a0
   0047 E5            [11]  123 	push	hl
   0048 21r59r01      [10]  124 	ld	hl, #___str_2
   004B E5            [11]  125 	push	hl
   004C CDr00r00      [17]  126 	call	_cpct_drawStringM1
                            127 ;src/main.c:62: cpct_drawStringM1("Mendo was in love with Lady Sol, a rich ", cpctm_screenPtr(CPCT_VMEM_START, 0, 40));
   004F 21 90 C1      [10]  128 	ld	hl, #0xc190
   0052 E5            [11]  129 	push	hl
   0053 21r76r01      [10]  130 	ld	hl, #___str_3
   0056 E5            [11]  131 	push	hl
   0057 CDr00r00      [17]  132 	call	_cpct_drawStringM1
                            133 ;src/main.c:63: cpct_drawStringM1("and beautiful woman. He was so poor that", cpctm_screenPtr(CPCT_VMEM_START, 0, 48));
   005A 21 E0 C1      [10]  134 	ld	hl, #0xc1e0
   005D E5            [11]  135 	push	hl
   005E 21r9Fr01      [10]  136 	ld	hl, #___str_4
   0061 E5            [11]  137 	push	hl
   0062 CDr00r00      [17]  138 	call	_cpct_drawStringM1
                            139 ;src/main.c:64: cpct_drawStringM1("he couldn't marry her. He decided to go ", cpctm_screenPtr(CPCT_VMEM_START, 0, 56));
   0065 21 30 C2      [10]  140 	ld	hl, #0xc230
   0068 E5            [11]  141 	push	hl
   0069 21rC8r01      [10]  142 	ld	hl, #___str_5
   006C E5            [11]  143 	push	hl
   006D CDr00r00      [17]  144 	call	_cpct_drawStringM1
                            145 ;src/main.c:65: cpct_drawStringM1("to the Crusades to get Fortune and Fame.", cpctm_screenPtr(CPCT_VMEM_START, 0, 64));
   0070 21 80 C2      [10]  146 	ld	hl, #0xc280
   0073 E5            [11]  147 	push	hl
   0074 21rF1r01      [10]  148 	ld	hl, #___str_6
   0077 E5            [11]  149 	push	hl
   0078 CDr00r00      [17]  150 	call	_cpct_drawStringM1
                            151 ;src/main.c:67: cpct_drawStringM1("When he became a brave hero, he heard", cpctm_screenPtr(CPCT_VMEM_START, 0, 80));
   007B 21 20 C3      [10]  152 	ld	hl, #0xc320
   007E E5            [11]  153 	push	hl
   007F 21r1Ar02      [10]  154 	ld	hl, #___str_7
   0082 E5            [11]  155 	push	hl
   0083 CDr00r00      [17]  156 	call	_cpct_drawStringM1
                            157 ;src/main.c:68: cpct_drawStringM1("Lady Sol was forced to marry don Ricardo", cpctm_screenPtr(CPCT_VMEM_START, 0, 88));
   0086 21 70 C3      [10]  158 	ld	hl, #0xc370
   0089 E5            [11]  159 	push	hl
   008A 21r40r02      [10]  160 	ld	hl, #___str_8
   008D E5            [11]  161 	push	hl
   008E CDr00r00      [17]  162 	call	_cpct_drawStringM1
                            163 ;src/main.c:69: cpct_drawStringM1("a very important noble. ", cpctm_screenPtr(CPCT_VMEM_START, 0, 96));
   0091 21 C0 C3      [10]  164 	ld	hl, #0xc3c0
   0094 E5            [11]  165 	push	hl
   0095 21r69r02      [10]  166 	ld	hl, #___str_9
   0098 E5            [11]  167 	push	hl
   0099 CDr00r00      [17]  168 	call	_cpct_drawStringM1
                            169 ;src/main.c:71: cpct_drawStringM1("Bring to an end the bloody Crusades war,", cpctm_screenPtr(CPCT_VMEM_START, 0, 112));
   009C 21 60 C4      [10]  170 	ld	hl, #0xc460
   009F E5            [11]  171 	push	hl
   00A0 21r82r02      [10]  172 	ld	hl, #___str_10
   00A3 E5            [11]  173 	push	hl
   00A4 CDr00r00      [17]  174 	call	_cpct_drawStringM1
                            175 ;src/main.c:72: cpct_drawStringM1("go through the underway passage and ", cpctm_screenPtr(CPCT_VMEM_START, 0, 120));
   00A7 21 B0 C4      [10]  176 	ld	hl, #0xc4b0
   00AA E5            [11]  177 	push	hl
   00AB 21rABr02      [10]  178 	ld	hl, #___str_11
   00AE E5            [11]  179 	push	hl
   00AF CDr00r00      [17]  180 	call	_cpct_drawStringM1
                            181 ;src/main.c:73: cpct_drawStringM1("finally assault the Castle to help Don ", cpctm_screenPtr(CPCT_VMEM_START, 0, 128));
   00B2 21 00 C5      [10]  182 	ld	hl, #0xc500
   00B5 E5            [11]  183 	push	hl
   00B6 21rD0r02      [10]  184 	ld	hl, #___str_12
   00B9 E5            [11]  185 	push	hl
   00BA CDr00r00      [17]  186 	call	_cpct_drawStringM1
                            187 ;src/main.c:74: cpct_drawStringM1("Mendo to go back to his love: Lady Sun.", cpctm_screenPtr(CPCT_VMEM_START, 0, 136));
   00BD 21 50 C5      [10]  188 	ld	hl, #0xc550
   00C0 E5            [11]  189 	push	hl
   00C1 21rF8r02      [10]  190 	ld	hl, #___str_13
   00C4 E5            [11]  191 	push	hl
   00C5 CDr00r00      [17]  192 	call	_cpct_drawStringM1
                            193 ;src/main.c:75: cpct_drawStringM1("PRESS ANY KEY TO START", cpct_getScreenPtr(CPCT_VMEM_START, 0, 168));
   00C8 21 00 A8      [10]  194 	ld	hl, #0xa800
   00CB E5            [11]  195 	push	hl
   00CC 26 C0         [ 7]  196 	ld	h, #0xc0
   00CE E5            [11]  197 	push	hl
   00CF CDr00r00      [17]  198 	call	_cpct_getScreenPtr
   00D2 01r20r03      [10]  199 	ld	bc, #___str_14+0
   00D5 E5            [11]  200 	push	hl
   00D6 C5            [11]  201 	push	bc
   00D7 CDr00r00      [17]  202 	call	_cpct_drawStringM1
                            203 ;src/main.c:78: pausaTecladoLibre();
   00DA CDr00r00      [17]  204 	call	_pausaTecladoLibre
                            205 ;src/main.c:82: do {
   00DD 0E 00         [ 7]  206 	ld	c, #0x00
   00DF                     207 00101$:
                            208 ;src/main.c:83: cpct_scanKeyboard_f();
   00DF C5            [11]  209 	push	bc
   00E0 CDr00r00      [17]  210 	call	_cpct_scanKeyboard_f
   00E3 C1            [10]  211 	pop	bc
                            212 ;src/main.c:84: semilla++;
   00E4 0C            [ 4]  213 	inc	c
                            214 ;src/main.c:86: while (!cpct_isAnyKeyPressed_f());
   00E5 C5            [11]  215 	push	bc
   00E6 CDr00r00      [17]  216 	call	_cpct_isAnyKeyPressed_f
   00E9 C1            [10]  217 	pop	bc
   00EA 7D            [ 4]  218 	ld	a, l
   00EB B7            [ 4]  219 	or	a, a
   00EC 28 F1         [12]  220 	jr	Z,00101$
                            221 ;src/main.c:89: if (!semilla)
   00EE 79            [ 4]  222 	ld	a,c
   00EF 6F            [ 4]  223 	ld	l,a
   00F0 B7            [ 4]  224 	or	a, a
   00F1 20 02         [12]  225 	jr	NZ,00105$
                            226 ;src/main.c:90: semilla = 1;
   00F3 2E 01         [ 7]  227 	ld	l, #0x01
   00F5                     228 00105$:
                            229 ;src/main.c:92: cpct_srand8(semilla);
   00F5 26 00         [ 7]  230 	ld	h, #0x00
   00F7 11 00 00      [10]  231 	ld	de,#0x0000
   00FA CDr00r00      [17]  232 	call	_cpct_setSeed_mxor
   00FD CDr00r00      [17]  233 	call	_cpct_restoreState_mxor_u8
                            234 ;src/main.c:93: nivel = 1;
   0100 21r3Cr00      [10]  235 	ld	hl,#_nivel + 0
   0103 36 01         [10]  236 	ld	(hl), #0x01
                            237 ;src/main.c:94: juego();
   0105 CDr00r00      [17]  238 	call	_juego
   0108 C3r03r00      [10]  239 	jp	00107$
   010B                     240 _paletaM1:
   010B 54                  241 	.db #0x54	; 84	'T'
   010C 40                  242 	.db #0x40	; 64
   010D 4B                  243 	.db #0x4b	; 75	'K'
   010E 44                  244 	.db #0x44	; 68	'D'
   010F                     245 _SoldadoArabe:
   010F 53 6F 6C 64 69 65   246 	.ascii "Soldier"
        72
   0116 00                  247 	.db 0x00
   0117 00                  248 	.db 0x00
   0118 00                  249 	.db 0x00
   0119 5A                  250 	.db #0x5a	; 90	'Z'
   011A 5A                  251 	.db #0x5a	; 90	'Z'
   011B 14                  252 	.db #0x14	; 20
   011C 03                  253 	.db #0x03	; 3
   011D 0A                  254 	.db #0x0a	; 10
   011E 1C                  255 	.db #0x1c	; 28
   011F 1C                  256 	.db #0x1c	; 28
   0120 20                  257 	.db #0x20	; 32
   0121r00r00               258 	.dw (_G_arabe_1 + 0)
   0123                     259 ___str_0:
   0123 20 20 20 20 20 20   260 	.ascii "         Don Mendo and Lady Sol"
        20 20 20 44 6F 6E
        20 4D 65 6E 64 6F
        20 61 6E 64 20 4C
        61 64 79 20 53 6F
        6C
   0142 00                  261 	.db 0x00
   0143                     262 ___str_1:
   0143 20 20 20 20 20 20   263 	.ascii "                   in"
        20 20 20 20 20 20
        20 20 20 20 20 20
        20 69 6E
   0158 00                  264 	.db 0x00
   0159                     265 ___str_2:
   0159 20 20 20 20 20 20   266 	.ascii "           Castle Concepcion"
        20 20 20 20 20 43
        61 73 74 6C 65 20
        43 6F 6E 63 65 70
        63 69 6F 6E
   0175 00                  267 	.db 0x00
   0176                     268 ___str_3:
   0176 4D 65 6E 64 6F 20   269 	.ascii "Mendo was in love with Lady Sol, a rich "
        77 61 73 20 69 6E
        20 6C 6F 76 65 20
        77 69 74 68 20 4C
        61 64 79 20 53 6F
        6C 2C 20 61 20 72
        69 63 68 20
   019E 00                  270 	.db 0x00
   019F                     271 ___str_4:
   019F 61 6E 64 20 62 65   272 	.ascii "and beautiful woman. He was so poor that"
        61 75 74 69 66 75
        6C 20 77 6F 6D 61
        6E 2E 20 48 65 20
        77 61 73 20 73 6F
        20 70 6F 6F 72 20
        74 68 61 74
   01C7 00                  273 	.db 0x00
   01C8                     274 ___str_5:
   01C8 68 65 20 63 6F 75   275 	.ascii "he couldn't marry her. He decided to go "
        6C 64 6E 27 74 20
        6D 61 72 72 79 20
        68 65 72 2E 20 48
        65 20 64 65 63 69
        64 65 64 20 74 6F
        20 67 6F 20
   01F0 00                  276 	.db 0x00
   01F1                     277 ___str_6:
   01F1 74 6F 20 74 68 65   278 	.ascii "to the Crusades to get Fortune and Fame."
        20 43 72 75 73 61
        64 65 73 20 74 6F
        20 67 65 74 20 46
        6F 72 74 75 6E 65
        20 61 6E 64 20 46
        61 6D 65 2E
   0219 00                  279 	.db 0x00
   021A                     280 ___str_7:
   021A 57 68 65 6E 20 68   281 	.ascii "When he became a brave hero, he heard"
        65 20 62 65 63 61
        6D 65 20 61 20 62
        72 61 76 65 20 68
        65 72 6F 2C 20 68
        65 20 68 65 61 72
        64
   023F 00                  282 	.db 0x00
   0240                     283 ___str_8:
   0240 4C 61 64 79 20 53   284 	.ascii "Lady Sol was forced to marry don Ricardo"
        6F 6C 20 77 61 73
        20 66 6F 72 63 65
        64 20 74 6F 20 6D
        61 72 72 79 20 64
        6F 6E 20 52 69 63
        61 72 64 6F
   0268 00                  285 	.db 0x00
   0269                     286 ___str_9:
   0269 61 20 76 65 72 79   287 	.ascii "a very important noble. "
        20 69 6D 70 6F 72
        74 61 6E 74 20 6E
        6F 62 6C 65 2E 20
   0281 00                  288 	.db 0x00
   0282                     289 ___str_10:
   0282 42 72 69 6E 67 20   290 	.ascii "Bring to an end the bloody Crusades war,"
        74 6F 20 61 6E 20
        65 6E 64 20 74 68
        65 20 62 6C 6F 6F
        64 79 20 43 72 75
        73 61 64 65 73 20
        77 61 72 2C
   02AA 00                  291 	.db 0x00
   02AB                     292 ___str_11:
   02AB 67 6F 20 74 68 72   293 	.ascii "go through the underway passage and "
        6F 75 67 68 20 74
        68 65 20 75 6E 64
        65 72 77 61 79 20
        70 61 73 73 61 67
        65 20 61 6E 64 20
   02CF 00                  294 	.db 0x00
   02D0                     295 ___str_12:
   02D0 66 69 6E 61 6C 6C   296 	.ascii "finally assault the Castle to help Don "
        79 20 61 73 73 61
        75 6C 74 20 74 68
        65 20 43 61 73 74
        6C 65 20 74 6F 20
        68 65 6C 70 20 44
        6F 6E 20
   02F7 00                  297 	.db 0x00
   02F8                     298 ___str_13:
   02F8 4D 65 6E 64 6F 20   299 	.ascii "Mendo to go back to his love: Lady Sun."
        74 6F 20 67 6F 20
        62 61 63 6B 20 74
        6F 20 68 69 73 20
        6C 6F 76 65 3A 20
        4C 61 64 79 20 53
        75 6E 2E
   031F 00                  300 	.db 0x00
   0320                     301 ___str_14:
   0320 50 52 45 53 53 20   302 	.ascii "PRESS ANY KEY TO START"
        41 4E 59 20 4B 45
        59 20 54 4F 20 53
        54 41 52 54
   0336 00                  303 	.db 0x00
                            304 	.area _CODE
                            305 	.area _INITIALIZER
                            306 	.area _CABS (ABS)
